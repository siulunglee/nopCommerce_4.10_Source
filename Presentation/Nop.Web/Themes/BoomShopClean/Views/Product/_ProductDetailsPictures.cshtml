@model ProductDetailsModel
@inject IThemeContext themeContext
@{
    var themeName = themeContext.WorkingThemeName;   
}
    <div class="gallery">
        <div class="picture">
            @if (Model.DefaultPictureZoomEnabled)
            {
                Html.AddCssFileParts($"~/Themes/{themeName}/Content/css/xzoom.css");
                Html.AddScriptParts(ResourceLocation.Footer, $"~/Themes/{themeName}/Content/js/xzoom.min.js");

                Html.AddCssFileParts("/lib/simpleLightbox/dist/simpleLightbox.min.css");
                Html.AddScriptParts(ResourceLocation.Footer, "/lib/simpleLightbox/dist/simpleLightbox.min.js");

                
                <a href="#" title="product">
                    <img alt="@Model.DefaultPictureModel.AlternateText"
                         src="@Model.DefaultPictureModel.ImageUrl"
                         title="@Model.DefaultPictureModel.Title"
                         itemprop="image"
                         class="xzoom"
                         xoriginal="@Model.DefaultPictureModel.FullSizeImageUrl"
                         id="main-product-img-@Model.Id" />
                </a>

                <script type="text/javascript" asp-location="Footer">
                $(document).ready(function () {


                    $('#main-product-img-@Model.Id').click(function () {

                        console.log($('#main-product-img-@Model.Id').attr('src'));

                        @*$('#main-product-img-@Model.Id').attr('src', $(this).attr('data-defaultsize'));
                        $('#main-product-img-@Model.Id').attr('title', $(this).attr('title'));
                        $('#main-product-img-@Model.Id').attr('alt', $(this).attr('alt'));
                        $('#main-product-img-@Model.Id').attr('xoriginal', $(this).attr('data-fullsize'));*@

                        var lightbox = SimpleLightbox.open({
                            items: [this.currentSrc]
                        });
                    });

                    $(".xzoom").xzoom({
                        position: "inside",
                        mposition: 'inside',
                        //tint: '#333', Xoffset: 10
                    });
        });
                </script>
            }
            else
            {
                <img alt="@Model.DefaultPictureModel.AlternateText" src="@Model.DefaultPictureModel.ImageUrl" title="@Model.DefaultPictureModel.Title" itemprop="image" id="main-product-img-@Model.Id" />
            }
        </div>

        @if (Model.PictureModels.Count > 1)
        {
            Html.AddCssFileParts($"~/Themes/{themeName}/Content/css/owl.carousel.css");
            Html.AddScriptParts(ResourceLocation.Footer, $"~/Themes/{themeName}/Content/js/owl.carousel.min.js");

            <div class="xzoom-thumbs picture-thumbs owl-carousel-small owl-carousel">
                @foreach (var picture in Model.PictureModels)
                {
                    <div class="thumb-item">
                        <img src="@picture.ThumbImageUrl"
                             alt="@picture.AlternateText"
                             title="@picture.Title"
                             data-defaultsize="@picture.ImageUrl"
                             data-fullsize="@picture.FullSizeImageUrl"
                             class="xzoom-gallery" />
                    </div>
                }
            </div>
            <script asp-location="Footer">
                $(document).ready(function () {

                $(".thumb-item:first-of-type").addClass("active");
                $('.thumb-item img').on('click', function () {
                    $(".thumb-item").removeClass("active");
                    $(this).parent(".thumb-item").addClass("active");
                    $('#main-product-img-@Model.Id').attr('src', $(this).attr('data-defaultsize'));
                    $('#main-product-img-@Model.Id').attr('title', $(this).attr('title'));
                    $('#main-product-img-@Model.Id').attr('alt', $(this).attr('alt'));
                    $('#main-product-img-@Model.Id').attr('xoriginal', $(this).attr('data-fullsize'));

                    var currentImageSrc = $('#main-product-img-@Model.Id');

                    if (currentImageSrc) {

                        console.log(currentImageSrc[0].currentSrc);
                        //$('#main-product-img-@Model.Id').attr('src', currentImageSrc[0].currentSrc);
                        ;
                    }

                });

                $('.picture-thumbs').owlCarousel({
                    loop: false,
                    margin: 10,
                    dots: true,
                    nav: true,
                    responsive: {
                        0: {
                            items: 2
                        },
                        320: {

                            items: 3
                        },
                        640: {
                            items: 4
                        },
                        1000: {
                            items: 3
                        },
                        1400: {
                            items: 4

                        }
                    }
                });

            });



            </script>
        }

        <!-- share button -->
        @*@await Html.PartialAsync("_ShareButton", Model)
        @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.ProductDetailsOverviewBottom, additionalData = Model })*@

    </div>

